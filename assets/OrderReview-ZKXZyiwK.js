import{d as v,u as y,r as b,a as x,b as k,o as w,c as i,e as t,f as o,F as f,g as C,h as c,i as r,w as u,t as n,j as l,k as S,R as p,l as P,v as R}from"./index-BzDBWPQU.js";const q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-minus'%3e%3cline%20x1='5'%20y1='12'%20x2='19'%20y2='12'%3e%3c/line%3e%3c/svg%3e",j="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-plus'%3e%3cline%20x1='12'%20y1='5'%20x2='12'%20y2='19'%3e%3c/line%3e%3cline%20x1='5'%20y1='12'%20x2='19'%20y2='12'%3e%3c/line%3e%3c/svg%3e",B="sk_test_7164d1189677d87342acd24cc906407eaaba17e8",T=v("payment",()=>{useAuthStore(),y();const m=b({});return{doPayment:async(d,_,s)=>{try{const e=await x.post("https://api.paystack.co/transaction/initialize",{email:d,amount:_,callback_url:"http://127.0.0.1:5173/success",channel:["card"],metadata:s},{headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});console.log(e.data.data),m.value=e.data.data,window.location.href=e.data.data.authorization_url}catch(e){console.log(e)}}}}),V={class:"cart-page mt-100"},N={class:"container"},D={class:"cart-page-wrapper"},E={class:"row"},z={class:"col-lg-6 col-md-12 col-12"},O={class:".cart-table .w-100 table align-middle table-hover .table-striped"},$={key:0},A={class:"cart-item-media"},F={key:0,class:"mini-img-wrapper"},L=["src"],M={class:"cart-item-details"},U={class:"product-title"},I={class:"product-vendor"},K={class:"cart-item-quantity"},Q={class:"quantity d-flex align-items-center justify-content-between"},W=["onClick"],Y=["onUpdate:modelValue"],G=["onClick"],H=["onClick"],J={class:"cart-item-price text-end"},X={class:"product-price"},Z={key:1},tt={class:"col-lg-6 col-md-12 col-12"},st={class:"cart-total-area"},et={class:"cart-total-box mt-4"},ot={class:"subtotal-item subtotal-box"},at={class:"subtotal-value"},it={class:"subtotal-item discount-box"},nt={class:"subtotal-value"},lt={class:"d-flex justify-content-center mt-4"},dt={__name:"OrderReview",setup(m){const a=k(),d=T();return w(async()=>{await a.getOrders()}),(_,s)=>(l(),i("div",V,[t("div",N,[t("div",D,[t("div",E,[t("div",z,[t("table",O,[s[7]||(s[7]=t("thead",null,[t("tr",null,[t("th",{class:"cart-caption heading_18"},"Product"),t("th",{class:"cart-caption heading_18"}),t("th",{class:"cart-caption text-center heading_18 d-none d-md-table-cell"},"Quantity"),t("th",{class:"cart-caption text-end heading_18"},"Price")])],-1)),o(a).orders.carts?(l(),i("tbody",$,[(l(!0),i(f,null,C(o(a).orders.carts,(e,g)=>(l(),i("tr",{class:"cart-item",key:g},[t("td",A,[e.product.images?(l(),i("div",F,[t("img",{class:"mini-img",src:e.product.images[0].img.startsWith("/media")?"http://127.0.0.1:8000"+e.product.images[0].img:e.product.images[0].img,alt:"img"},null,8,L)])):S("",!0)]),t("td",M,[t("h2",U,[r(o(p),{to:{name:"product-detail",params:{product:e.product.product.id}}},{default:u(()=>[c(n(e.product.product.name),1)]),_:2},1032,["to"])]),t("p",I,n(e.product.product.discount)+"% discount of "+n(e.product.product.price),1)]),t("td",K,[t("div",Q,[t("button",{class:"qty-btn dec-qty",onClick:()=>o(a).decCart(e.id,e.count-1)},s[1]||(s[1]=[t("img",{src:q,alt:"minus"},null,-1)]),8,W),P(t("input",{class:"qty-input",type:"number","onUpdate:modelValue":h=>e.count=h,min:1,max:12},null,8,Y),[[R,e.count]]),t("button",{class:"qty-btn inc-qty",onClick:()=>o(a).incCart(e.id,e.count+1)},s[2]||(s[2]=[t("img",{src:j,alt:"plus"},null,-1)]),8,G)]),t("a",{href:"#",class:"product-remove mt-2",onClick:h=>o(a).deleteCart(e.id)},"Remove",8,H)]),t("td",J,[t("div",X,"₦"+n(e.product.product.new_price),1)])]))),128))])):(l(),i("div",Z,[s[6]||(s[6]=t("h2",null,"No Item Ordered !!!",-1)),t("p",null,[s[4]||(s[4]=c(" Return to ")),r(o(p),{to:"/"},{default:u(()=>s[3]||(s[3]=[c("home")])),_:1}),s[5]||(s[5]=c(" to add product to cart "))])]))])]),t("div",tt,[t("div",st,[t("div",et,[t("div",ot,[s[8]||(s[8]=t("h4",{class:"subtotal-title"},"Subtotals:",-1)),t("p",at,"₦"+n(o(a).cartSubtotalReview),1)]),s[11]||(s[11]=t("div",{class:"subtotal-item shipping-box"},[t("h4",{class:"subtotal-title"},"Shipping:"),t("p",{class:"subtotal-value"},"₦10.00")],-1)),s[12]||(s[12]=t("hr",null,null,-1)),t("div",it,[s[9]||(s[9]=t("h4",{class:"subtotal-title"},"Total:",-1)),t("p",nt,"₦"+n(o(a).cartSubtotal-o(a).cartTotalDiscount),1)]),s[13]||(s[13]=t("p",{class:"shipping_text"},"Shipping & taxes calculated at checkout",-1)),t("div",lt,[t("button",{class:"btn btn-secondary",onClick:s[0]||(s[0]=e=>o(d).doPayment(o(a).orders.created_by.email,2e4,{cart_id:o(a).orders.id,cancel_action:"http://127.0.0.1:8000/transaction/cancelled"}))},"Pay"),r(o(p),{to:"/checkout",class:"position-relative btn-primary text-uppercase"},{default:u(()=>s[10]||(s[10]=[c(" Procced to checkout ")])),_:1})])])])])])])])]))}};export{dt as default};
