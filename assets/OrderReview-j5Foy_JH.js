import{s as y,E as g,k as v,v as k,j as x,l as f,c as i,g as t,u as e,F as w,e as C,m as d,f as r,w as u,t as n,o as l,h as S,R as p,y as P,z as R}from"./index-BdKgXsWU.js";import{_ as q,a as T}from"./plus-CLXrtRrJ.js";const V="sk_test_7164d1189677d87342acd24cc906407eaaba17e8",E=y("payment",()=>{useAuthStore(),g();const m=v({});return{doPayment:async(c,_,s)=>{try{const o=await k.post("https://api.paystack.co/transaction/initialize",{email:c,amount:_,callback_url:"http://127.0.0.1:5173/success",channel:["card"],metadata:s},{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});console.log(o.data.data),m.value=o.data.data,window.location.href=o.data.data.authorization_url}catch(o){console.log(o)}}}}),N={class:"cart-page mt-100"},j={class:"container"},z={class:"cart-page-wrapper"},B={class:"row"},D={class:"col-lg-6 col-md-12 col-12"},O={class:".cart-table .w-100 table align-middle table-hover .table-striped"},$={key:0},A={class:"cart-item-media"},F={key:0,class:"mini-img-wrapper"},L=["src"],M={class:"cart-item-details"},U={class:"product-title"},I={class:"product-vendor"},K={class:"cart-item-quantity"},Q={class:"quantity d-flex align-items-center justify-content-between"},W=["onClick"],Y=["onUpdate:modelValue"],G=["onClick"],H=["onClick"],J={class:"cart-item-price text-end"},X={class:"product-price"},Z={key:1},tt={class:"col-lg-6 col-md-12 col-12"},st={class:"cart-total-area"},ot={class:"cart-total-box mt-4"},et={class:"subtotal-item subtotal-box"},at={class:"subtotal-value"},it={class:"subtotal-item discount-box"},nt={class:"subtotal-value"},lt={class:"d-flex justify-content-center mt-4"},rt={__name:"OrderReview",setup(m){const a=x(),c=E();return f(async()=>{await a.getOrders()}),(_,s)=>(l(),i("div",N,[t("div",j,[t("div",z,[t("div",B,[t("div",D,[t("table",O,[s[7]||(s[7]=t("thead",null,[t("tr",null,[t("th",{class:"cart-caption heading_18"},"Product"),t("th",{class:"cart-caption heading_18"}),t("th",{class:"cart-caption text-center heading_18 d-none d-md-table-cell"},"Quantity"),t("th",{class:"cart-caption text-end heading_18"},"Price")])],-1)),e(a).orders.carts?(l(),i("tbody",$,[(l(!0),i(w,null,C(e(a).orders.carts,(o,b)=>(l(),i("tr",{class:"cart-item",key:b},[t("td",A,[o.product.images?(l(),i("div",F,[t("img",{class:"mini-img",src:o.product.images[0].img.startsWith("/media")?"http://127.0.0.1:8000"+o.product.images[0].img:o.product.images[0].img,alt:"img"},null,8,L)])):S("",!0)]),t("td",M,[t("h2",U,[r(e(p),{to:{name:"product-detail",params:{product:o.product.product.id}}},{default:u(()=>[d(n(o.product.product.name),1)]),_:2},1032,["to"])]),t("p",I,n(o.product.product.discount)+"% discount of "+n(o.product.product.price),1)]),t("td",K,[t("div",Q,[t("button",{class:"qty-btn dec-qty",onClick:()=>e(a).decCart(o.id,o.count-1)},s[1]||(s[1]=[t("img",{src:q,alt:"minus"},null,-1)]),8,W),P(t("input",{class:"qty-input",type:"number","onUpdate:modelValue":h=>o.count=h,min:1,max:12},null,8,Y),[[R,o.count]]),t("button",{class:"qty-btn inc-qty",onClick:()=>e(a).incCart(o.id,o.count+1)},s[2]||(s[2]=[t("img",{src:T,alt:"plus"},null,-1)]),8,G)]),t("a",{href:"#",class:"product-remove mt-2",onClick:h=>e(a).deleteCart(o.id)},"Remove",8,H)]),t("td",J,[t("div",X,"₦"+n(o.product.product.new_price),1)])]))),128))])):(l(),i("div",Z,[s[6]||(s[6]=t("h2",null,"No Item Ordered !!!",-1)),t("p",null,[s[4]||(s[4]=d(" Return to ")),r(e(p),{to:"/"},{default:u(()=>s[3]||(s[3]=[d("home")])),_:1}),s[5]||(s[5]=d(" to add product to cart "))])]))])]),t("div",tt,[t("div",st,[t("div",ot,[t("div",et,[s[8]||(s[8]=t("h4",{class:"subtotal-title"},"Subtotals:",-1)),t("p",at,"₦"+n(e(a).cartSubtotalReview),1)]),s[11]||(s[11]=t("div",{class:"subtotal-item shipping-box"},[t("h4",{class:"subtotal-title"},"Shipping:"),t("p",{class:"subtotal-value"},"₦10.00")],-1)),s[12]||(s[12]=t("hr",null,null,-1)),t("div",it,[s[9]||(s[9]=t("h4",{class:"subtotal-title"},"Total:",-1)),t("p",nt,"₦"+n(e(a).cartSubtotal-e(a).cartTotalDiscount),1)]),s[13]||(s[13]=t("p",{class:"shipping_text"},"Shipping & taxes calculated at checkout",-1)),t("div",lt,[t("button",{class:"btn btn-secondary",onClick:s[0]||(s[0]=o=>e(c).doPayment(e(a).orders.created_by.email,2e4,{cart_id:e(a).orders.id,cancel_action:"http://127.0.0.1:8000/transaction/cancelled"}))},"Pay"),r(e(p),{to:"/checkout",class:"position-relative btn-primary text-uppercase"},{default:u(()=>s[10]||(s[10]=[d(" Procced to checkout ")])),_:1})])])])])])])])]))}};export{rt as default};
